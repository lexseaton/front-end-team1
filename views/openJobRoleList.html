<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    {% include "links.html" %}
    <title>Open Job Role List</title>
    
  
</head>
<body>
    
    <div id="heading-link-div"> {% include "heading.html" %} </div>
    <h1 id="open-job-roles-header">Open Job Roles</h1>
    <table id="role-table" class="table">
        <tr id="table-rows">
            <th id="job-role-name-column" onclick="'click'"> Job Role Name {%if order == 'asc' %} &uarr; {% endif %} </th>
            <th id="job-role-location-column">Job Role Location</th>
            <th id="job-role-capability-column">Job Role Capability</th>
            <th id="job-role-band-column">Job Role Band</th>
            <th id="job-role-closing-date-column">Job Role Closing Date</th>
        </tr>
        {% for openJobRole in openJobRoles %}
            <tr id="table-rows-2">
                <td id="td-role-name-{{loop.index}}"><a id="a-role-name-{{loop.index}}" href="/openJobRoles/{{openJobRole.jobRoleID}}" target="_blank">{{ openJobRole.jobRoleName }}</a></td>
                <td id="td-role-loction">{{ openJobRole.jobRoleLocation }}</td>
                <td id="td-role-capability">{{ openJobRole.jobRoleCapability }}</td>
                <td id="td-role-band">{{ openJobRole.jobRoleBand }}</td>
                <td id="td-role-closing-date">{{ openJobRole.jobRoleClosingDate | date }}</td>
            </tr>
        {% endfor %}
    </table>
    <div class="footer-div"> {% include "footer.html" %} </div>
    <div id="order" value="{{ order }}">{{ order }} </div>
</body>
</html>
<script> 
   
    document.addEventListener('DOMContentLoaded', function() {
        var order = document.getElementById('order');
        console.log(order.value) 
        switch(order.value) {
            case 'asc':
                columnName = document.getElementById('job-role-name-column');
                columnName.addEventListener('click', function() {
                    var url = '/openJobRolesOrdered?'; 
                    var params = {
                        order: 'desc',
                        orderBy: 'name'
                    }
                    window.location.href = url+'order='+params.order+'&orderBy='+params.orderBy;                        
                });
                break;
            case 'desc':
                columnName = document.getElementById('job-role-name-column');
                columnName.addEventListener('click', function() {
                    var url = '/openJobRoles'; 
                    window.location.href = url;                        
                });
                break;
            default:
                columnName = document.getElementById('job-role-name-column');
                columnName.addEventListener('click', function() {
                    var url = '/openJobRolesOrdered?'; 
                    var params = {
                        order: 'asc',
                        orderBy: 'name'
                    }
                    window.location.href = url+'order='+params.order+'&orderBy='+params.orderBy;                        
                });
                break;
        }
    });

</script>
